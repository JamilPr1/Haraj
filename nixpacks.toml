[phases.setup]
nixPkgs = ["python39"]

[phases.install]
cmds = [
  "pip install -r requirements.txt",
  "apt-get update && apt-get install -y wget gnupg && wget -q -O - https://dl-ssl.google.com/linux/linux_signing_key.pub | apt-key add - && echo 'deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main' >> /etc/apt/sources.list.d/google-chrome.list && apt-get update && apt-get install -y google-chrome-stable || echo 'Chrome installation failed, will use webdriver-manager'"
]

[phases.build]
cmds = []

[start]
cmd = "gunicorn dashboard:app --bind 0.0.0.0:$PORT --workers 2 --timeout 120"
